
@{
    Layout = null;
}

<!DOCTYPE html>

<html>
<head>
    <meta name="viewport" content="width=device-width" />
    <title>查看问卷</title>
    <script src="~/lib/jquery/dist/jquery.js"></script>
    <link href="~/lib/layui/css/layui.css" rel="stylesheet" />
    <script src="~/lib/layui/layui.js"></script>
</head>
<body>
    <div class="layui-container-full">
        <div class="layui-row">

            <div class="layui-col-md12">

                <h2>查看问卷</h2>
            </div>
            <div class="layui-col-md12">
                <table class="layui-table" id="LAY_table_user" lay-size="sm" lay-filter="useruv"></table>
            </div>
        </div>
    </div>
</body>
</html>
<script type="text/html" id="barDemo">
    <a class="layui-btn layui-btn-xs layui-bg-green" data-method="notice" lay-event="look">查看</a>
    <a class="layui-btn layui-bg-green layui-btn-xs" lay-event="del">删除</a>
</script>
<script>

    //主方法

        layui.use('table', function () {
            var table = layui.table;

            //方法级渲染
            table.render({
                elem: '#LAY_table_user'
                , url: "@Url.Action("jsonTable", "Home")"
                , cols: [[
                    { checkbox: true, fixed: true }
                    , { field: 'formNote', title: '问卷简介', }
                    , { field: 'formTitle', title: '问卷标题', }
                    , { field: 'formCopyright', title: '问卷版权', }
                    , { field: 'formCreateDate', title: '创建时间', }
                    , { field: 'formStatus', title: '问卷状态', }
                    , { field: 'formCreater', title: '创建者', }
                    , { field: 'formID', title: '操作', toolbar: '#barDemo' }
                ]]
                , id: 'testReload'
                , page: true
                , height: 'full-200'
                , skin: 'line' //表格风格
            });


            // 删除，修改
            table.on('tool(useruv)', function (obj) {
                var data = obj.data;
                if (obj.event === 'del') {
                    layer.confirm('是否确定删除', function (index) {
                        ajax_request({
                            url: option.del,
                            data: { id: data["id"] },
                            callback: function (pic) {
                                if (pic.code == 200) {
                                    obj.del();
                                    layer.close(index);
                                } else {
                                    console.log(pic);
                                    layer.msg("服务器出错了，请重试");
                                }
                            }
                        });
                    });
                } else if (obj.event === 'look') {
                    console.log(data["formID"]);
                    var url = " @Url.Action("Index", "ShowText")";
                    var href = url + "/?formid=" + data["formID"];
                    window.open(href);
                   // editContent(href);
                }
            });
        });



    ////修改
    //var editContent = function (href) {
    //    console.log(href);
    //    var index = layer.open({
    //        type: 2,
    //        content: href,
    //        area: ['1220px', '505px'],
    //        maxmin: true
    //    });
    //    layer.full(index);
    //}
</script>